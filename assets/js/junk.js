var Customer={
	load:function(a,callback){
		$.ajax({
			url:api_base+'projects'+'/'+a+'/customer?token='+token,
			method:'GET',
			dataType:'json',
			statusCode:{
				200:function(response){
					$.ajax({
						url:api_base+'customers'+'/'+response.item_id+'?token='+token,
						method:'GET',
						dataType:'json',
						statusCode:{
							200:function(newresponse){
								console.log(newresponse);
								callback(newresponse);
							}
						}
					});
				}
			}
		});
	},
	save:function(a,callback){
		$.extend(a,{token:token});
		$.ajax({
			url:api_base+'customers',
			method:'POST',
			data:a,
			statusCode:{
				201:function(response){
					callback(response);
				}
			}
		});
	},
	assign:function(a,b,callback){
		$.extend(a,{token:token});
		$.ajax({
			url:api_base+'projects/'+b+'/customer',
			method:'POST',
			data:a,
			statusCode:{
				201:function(response){
					callback(response);
				}
			}
		});
	},
	render:function(a,target){
		$(target).children('.name').html(a.name);
		$(target).children('.description').html(a.description);
	},
	loadAsOption:function(target){
		$(target).html('');
		$.ajax({
			url:api_base+'customers'+'?token='+token,
			method:'GET',
			dataType:'json',
			statusCode:{
				200:function(response){
					$(target).append($('<option value="0">-Select-</option>'));
					for(var i=0;i<response.length;i++){
						$(target).append($('<option value="'+response[i].id+'">'+response[i].name+'</option>'));
					}
				}
			}
		});
	}
};
var Supplier={
	load:function(a,callback){
		$.ajax({
			url:api_base+'projects'+'/'+a+'/supplier?token='+token,
			method:'GET',
			dataType:'json',
			statusCode:{
				200:function(response){
					$.ajax({
						url:api_base+'suppliers'+'/'+response.item_id+'?token='+token,
						method:'GET',
						dataType:'json',
						statusCode:{
							200:function(newresponse){
								console.log(newresponse);
								callback(newresponse);
							}
						}
					});
				}
			}
		});
	},
	save:function(a,callback){
		$.extend(a,{token:token});
		$.ajax({
			url:api_base+'suppliers',
			method:'POST',
			data:a,
			statusCode:{
				201:function(response){
					callback(response);
				}
			}
		});
	},
	assign:function(a,b,callback){
		$.extend(a,{token:token});
		$.ajax({
			url:api_base+'projects/'+b+'/supplier',
			method:'POST',
			data:a,
			statusCode:{
				201:function(response){
					callback(response);
				}
			}
		});
	},
	render:function(a,target){
		$(target).children('.name').html(a.name);
		$(target).children('.description').html(a.description);
	},
	loadAsOption:function(target){
		$(target).html('');
		$.ajax({
			url:api_base+'suppliers'+'?token='+token,
			method:'GET',
			dataType:'json',
			statusCode:{
				200:function(response){
					$(target).append($('<option value="0">-Select-</option>'));
					for(var i=0;i<response.length;i++){
						$(target).append($('<option value="'+response[i].id+'">'+response[i].name+'</option>'));
					}
				}
			}
		});
	}
};
var Product={
	load:function(a,callback){
		$.ajax({
			url:api_base+'projects'+'/'+a+'/product?token='+token,
			method:'GET',
			dataType:'json',
			statusCode:{
				200:function(response){
					$.ajax({
						url:api_base+'products'+'/'+response.item_id+'?token='+token,
						method:'GET',
						dataType:'json',
						statusCode:{
							200:function(newresponse){
								console.log(newresponse);
								callback(newresponse);
							}
						}
					});
				}
			}
		});
	},
	save:function(a,callback){
		$.extend(a,{token:token});
		$.ajax({
			url:api_base+'products',
			method:'POST',
			data:a,
			statusCode:{
				201:function(response){
					callback(response);
				}
			}
		});
	},
	assign:function(a,b,callback){
		$.extend(a,{token:token});
		$.ajax({
			url:api_base+'projects/'+b+'/product',
			method:'POST',
			data:a,
			statusCode:{
				201:function(response){
					callback(response);
				}
			}
		});
	},
	render:function(a,target){
		$(target).children('.name').html(a.name);
		$(target).children('.type').html(a.type);
		$(target).children('.origin').html(a.origin);
		$(target).children('.quantity').html(a.quantity);
		$(target).children('.unit_quantity').html(a.unit_quantity);
		$(target).children('.unit_price').html(a.unit_price);
		$(target).children('.unit_price_currency').html(a.unit_price_currency);
	}
};
var Contract={
	load:function(a,callback){
		$.ajax({
			url:api_base+'projects'+'/'+a+'/contract?token='+token,
			method:'GET',
			dataType:'json',
			statusCode:{
				200:function(response){
					$.ajax({
						url:api_base+'contracts'+'/'+response.item_id+'?token='+token,
						method:'GET',
						dataType:'json',
						statusCode:{
							200:function(newresponse){
								console.log(newresponse);
								callback(newresponse);
							}
						}
					});
				}
			}
		});
	},
	save:function(a,callback){
		$.extend(a,{token:token});
		$.ajax({
			url:api_base+'contracts',
			method:'POST',
			data:a,
			statusCode:{
				201:function(response){
					callback(response);
				}
			}
		});
	},
	assign:function(a,b,callback){
		$.extend(a,{token:token});
		$.ajax({
			url:api_base+'projects/'+b+'/contract',
			method:'POST',
			data:a,
			statusCode:{
				201:function(response){
					callback(response);
				}
			}
		});
	},
	render:function(a,target){
		$(target).children('.no').html(a.no);
		$(target).children('.initiate_date').html(a.initiate_date);
		$(target).children('.agreement_date').html(a.agreement_date);
		$(target).children('.commission_rate').html(a.commission_rate);
		$(target).children('.commission_rate_unit').html(a.commission_rate_unit);
	}
};
/*
if(current_step>0){
	$('<div>',{id:'customer',class:'page'}).appendTo($(target).parent())
	.append($('<div>',{class:'name'}))
	.append($('<div>',{class:'description'}))
	.css('height',$(window).height());
}
if(current_step>1){
	$('<div>',{id:'supplier',class:'page'}).appendTo($(target).parent())
	.append($('<div>',{class:'name'}))
	.append($('<div>',{class:'description'}))
	.css('height',$(window).height());
}
if(current_step>2){
	$('<div>',{id:'product',class:'page'}).appendTo($(target).parent())
	.append($('<div>',{class:'name'}))
	.append($('<div>',{class:'type'}))
	.append($('<div>',{class:'origin'}))
	.append($('<div>',{class:'quantity'}))
	.append($('<div>',{class:'unit_quantity'}))
	.append($('<div>',{class:'unit_price'}))
	.append($('<div>',{class:'unit_price_currency'}))
	.css('height',$(window).height());
}
if(current_step>3){
	$('<div>',{id:'contract',class:'page'}).appendTo($(target).parent())
	.append($('<div>',{class:'no'}))
	.append($('<div>',{class:'initiate_date'}))
	.append($('<div>',{class:'agreement_date'}))
	.append($('<div>',{class:'commission_rate'}))
	.append($('<div>',{class:'commission_rate_unit'}))
	.css('height',$(window).height());
}
*/
/*
if(current_step>0){
	steps.push('customer');
	Customer.load(a.id,function(response){
		Customer.render(response,$('#customer'));
		if(current_step==1)Final.init(steps);
	});
}
if(current_step>1){
	steps.push('supplier');
	Supplier.load(a.id,function(response){
		Supplier.render(response,$('#supplier'));
		if(current_step==2)Final.init(steps);
	});
}
if(current_step>2){
	steps.push('product');
	Product.load(a.id,function(response){
		Product.render(response,$('#product'));
		if(current_step==3)Final.init(steps);
	});
}
if(current_step>3){
	steps.push('contract');
	Contract.load(a.id,function(response){
		Contract.render(response,$('#contract'));
		if(current_step==4)Final.init(steps);
	});
}
*/